<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MavenProject.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">m2e-core-tests coverage of Maven</a> &gt; <a href="index.source.html" class="el_package">org.apache.maven.project</a> &gt; <span class="el_source">MavenProject.java</span></div><h1>MavenProject.java</h1><pre class="source lang-java linenums">package org.apache.maven.project;

/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * &quot;License&quot;); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

import java.io.File;
import java.io.IOException;
import java.io.Writer;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.LinkedHashSet;
import java.util.List;
import java.util.Map;
import java.util.Properties;
import java.util.Set;

import org.apache.maven.RepositoryUtils;
import org.apache.maven.artifact.Artifact;
import org.apache.maven.artifact.ArtifactUtils;
import org.apache.maven.artifact.DependencyResolutionRequiredException;
// remove once createArtifacts() is removed
import org.apache.maven.artifact.factory.ArtifactFactory;
import org.apache.maven.artifact.repository.ArtifactRepository;
import org.apache.maven.artifact.resolver.filter.ArtifactFilter;
import org.apache.maven.model.Build;
import org.apache.maven.model.CiManagement;
import org.apache.maven.model.Contributor;
import org.apache.maven.model.Dependency;
import org.apache.maven.model.DependencyManagement;
import org.apache.maven.model.Developer;
import org.apache.maven.model.DistributionManagement;
import org.apache.maven.model.Extension;
import org.apache.maven.model.IssueManagement;
import org.apache.maven.model.License;
import org.apache.maven.model.MailingList;
import org.apache.maven.model.Model;
import org.apache.maven.model.Organization;
import org.apache.maven.model.Plugin;
import org.apache.maven.model.PluginExecution;
import org.apache.maven.model.PluginManagement;
import org.apache.maven.model.Prerequisites;
import org.apache.maven.model.Profile;
import org.apache.maven.model.ReportPlugin;
import org.apache.maven.model.ReportSet;
import org.apache.maven.model.Reporting;
import org.apache.maven.model.Repository;
import org.apache.maven.model.Resource;
import org.apache.maven.model.Scm;
import org.apache.maven.model.io.xpp3.MavenXpp3Writer;
import org.apache.maven.project.artifact.InvalidDependencyVersionException;
import org.apache.maven.project.artifact.MavenMetadataSource;
import org.codehaus.plexus.classworlds.realm.ClassRealm;
import org.codehaus.plexus.util.xml.Xpp3Dom;
import org.eclipse.aether.graph.DependencyFilter;
import org.eclipse.aether.repository.RemoteRepository;

/**
 * The concern of the project is provide runtime values based on the model.
 * &lt;p&gt;
 * The values in the model remain untouched but during the process of building a project notions like inheritance and
 * interpolation can be added. This allows to have an entity which is useful in a runtime while preserving the model so
 * that it can be marshalled and unmarshalled without being tainted by runtime requirements.
 * &lt;/p&gt;
 * &lt;p&gt;
 * With changes during 3.2.2 release MavenProject is closer to being immutable after construction with the removal of
 * all components from this class, and the upfront construction taken care of entirely by the @{ProjectBuilder}. There
 * is still the issue of having to run the lifecycle in order to find all the compile source roots and resource
 * directories but I hope to take care of this during the Maven 4.0 release (jvz).
 * &lt;/p&gt;
 */
public class MavenProject
    implements Cloneable
{
    public static final String EMPTY_PROJECT_GROUP_ID = &quot;unknown&quot;;

    public static final String EMPTY_PROJECT_ARTIFACT_ID = &quot;empty-project&quot;;

    public static final String EMPTY_PROJECT_VERSION = &quot;0&quot;;

    private Model model;

    private MavenProject parent;

    private File file;

    private File basedir;

    private Set&lt;Artifact&gt; resolvedArtifacts;

    private ArtifactFilter artifactFilter;

    private Set&lt;Artifact&gt; artifacts;

    private Artifact parentArtifact;

    private Set&lt;Artifact&gt; pluginArtifacts;

    private List&lt;ArtifactRepository&gt; remoteArtifactRepositories;

    private List&lt;ArtifactRepository&gt; pluginArtifactRepositories;

    private List&lt;RemoteRepository&gt; remoteProjectRepositories;

    private List&lt;RemoteRepository&gt; remotePluginRepositories;

    private List&lt;Artifact&gt; attachedArtifacts;

    private MavenProject executionProject;

    private List&lt;MavenProject&gt; collectedProjects;

<span class="pc" id="L130">    private List&lt;String&gt; compileSourceRoots = new ArrayList&lt;&gt;();</span>

<span class="pc" id="L132">    private List&lt;String&gt; testCompileSourceRoots = new ArrayList&lt;&gt;();</span>

<span class="pc" id="L134">    private List&lt;String&gt; scriptSourceRoots = new ArrayList&lt;&gt;();</span>

    private ArtifactRepository releaseArtifactRepository;

    private ArtifactRepository snapshotArtifactRepository;

<span class="pc" id="L140">    private List&lt;Profile&gt; activeProfiles = new ArrayList&lt;&gt;();</span>

<span class="pc" id="L142">    private Map&lt;String, List&lt;String&gt;&gt; injectedProfileIds = new LinkedHashMap&lt;&gt;();</span>

    private Set&lt;Artifact&gt; dependencyArtifacts;

    private Artifact artifact;

    // calculated.
    private Map&lt;String, Artifact&gt; artifactMap;

    private Model originalModel;

    private Map&lt;String, Artifact&gt; pluginArtifactMap;

    private Set&lt;Artifact&gt; reportArtifacts;

    private Map&lt;String, Artifact&gt; reportArtifactMap;

    private Set&lt;Artifact&gt; extensionArtifacts;

    private Map&lt;String, Artifact&gt; extensionArtifactMap;

    private Map&lt;String, Artifact&gt; managedVersionMap;

<span class="pc" id="L165">    private Map&lt;String, MavenProject&gt; projectReferences = new HashMap&lt;&gt;();</span>

    private boolean executionRoot;

    private File parentFile;

    private Map&lt;String, Object&gt; context;

    private ClassRealm classRealm;

    private DependencyFilter extensionDependencyFilter;

<span class="pc" id="L177">    private final Set&lt;String&gt; lifecyclePhases = Collections.synchronizedSet( new LinkedHashSet&lt;String&gt;() );</span>

    public MavenProject()
<span class="fc" id="L180">    {</span>
<span class="fc" id="L181">        Model model = new Model();</span>

<span class="fc" id="L183">        model.setGroupId( EMPTY_PROJECT_GROUP_ID );</span>
<span class="fc" id="L184">        model.setArtifactId( EMPTY_PROJECT_ARTIFACT_ID );</span>
<span class="fc" id="L185">        model.setVersion( EMPTY_PROJECT_VERSION );</span>

<span class="fc" id="L187">        setModel( model );</span>
<span class="fc" id="L188">    }</span>

    public MavenProject( Model model )
<span class="nc" id="L191">    {</span>
<span class="nc" id="L192">        setModel( model );</span>
<span class="nc" id="L193">    }</span>

    public MavenProject( MavenProject project )
<span class="nc" id="L196">    {</span>
<span class="nc" id="L197">        deepCopy( project );</span>
<span class="nc" id="L198">    }</span>

    public File getParentFile()
    {
<span class="fc" id="L202">        return parentFile;</span>
    }

    public void setParentFile( File parentFile )
    {
<span class="fc" id="L207">        this.parentFile = parentFile;</span>
<span class="fc" id="L208">    }</span>

    // ----------------------------------------------------------------------
    // Accessors
    // ----------------------------------------------------------------------

    public Artifact getArtifact()
    {
<span class="fc" id="L216">        return artifact;</span>
    }

    public void setArtifact( Artifact artifact )
    {
<span class="fc" id="L221">        this.artifact = artifact;</span>
<span class="fc" id="L222">    }</span>

    // TODO I would like to get rid of this. jvz.
    public Model getModel()
    {
<span class="fc" id="L227">        return model;</span>
    }

    /**
     * Returns the project corresponding to a declared parent.
     *
     * @return the parent, or null if no parent is declared or there was an error building it
     */
    public MavenProject getParent()
    {
<span class="fc" id="L237">        return parent;</span>
    }

    public void setParent( MavenProject parent )
    {
<span class="fc" id="L242">        this.parent = parent;</span>
<span class="fc" id="L243">    }</span>

    public boolean hasParent()
    {
<span class="nc bnc" id="L247" title="All 2 branches missed.">        return getParent() != null;</span>
    }

    public File getFile()
    {
<span class="fc" id="L252">        return file;</span>
    }

    public void setFile( File file )
    {
<span class="fc" id="L257">        this.file = file;</span>
<span class="fc bfc" id="L258" title="All 2 branches covered.">        this.basedir = file != null ? file.getParentFile() : null;</span>
<span class="fc" id="L259">    }</span>

    /**
     * Sets project {@code file} without changing project {@code basedir}.
     * 
     * @since 3.2.4
     */
    public void setPomFile( File file )
    {
<span class="nc" id="L268">        this.file = file;</span>
<span class="nc" id="L269">    }</span>

    public File getBasedir()
    {
<span class="fc" id="L273">        return basedir;</span>
    }

    public void setDependencies( List&lt;Dependency&gt; dependencies )
    {
<span class="nc" id="L278">        getModel().setDependencies( dependencies );</span>
<span class="nc" id="L279">    }</span>

    public List&lt;Dependency&gt; getDependencies()
    {
<span class="fc" id="L283">        return getModel().getDependencies();</span>
    }

    public DependencyManagement getDependencyManagement()
    {
<span class="fc" id="L288">        return getModel().getDependencyManagement();</span>
    }

    // ----------------------------------------------------------------------
    // Test and compile sourceroots.
    // ----------------------------------------------------------------------

    private void addPath( List&lt;String&gt; paths, String path )
    {
<span class="pc bpc" id="L297" title="1 of 2 branches missed.">        if ( path != null )</span>
        {
<span class="fc" id="L299">            path = path.trim();</span>
<span class="pc bpc" id="L300" title="1 of 2 branches missed.">            if ( path.length() &gt; 0 )</span>
            {
<span class="fc" id="L302">                File file = new File( path );</span>
<span class="pc bpc" id="L303" title="1 of 2 branches missed.">                if ( file.isAbsolute() )</span>
                {
<span class="fc" id="L305">                    path = file.getAbsolutePath();</span>
                }
                else
                {
<span class="nc" id="L309">                    path = new File( getBasedir(), path ).getAbsolutePath();</span>
                }

<span class="pc bpc" id="L312" title="1 of 2 branches missed.">                if ( !paths.contains( path ) )</span>
                {
<span class="fc" id="L314">                    paths.add( path );</span>
                }
            }
        }
<span class="fc" id="L318">    }</span>

    public void addCompileSourceRoot( String path )
    {
<span class="fc" id="L322">        addPath( getCompileSourceRoots(), path );</span>
<span class="fc" id="L323">    }</span>

    public void addTestCompileSourceRoot( String path )
    {
<span class="fc" id="L327">        addPath( getTestCompileSourceRoots(), path );</span>
<span class="fc" id="L328">    }</span>

    public List&lt;String&gt; getCompileSourceRoots()
    {
<span class="fc" id="L332">        return compileSourceRoots;</span>
    }

    public List&lt;String&gt; getTestCompileSourceRoots()
    {
<span class="fc" id="L337">        return testCompileSourceRoots;</span>
    }

    public List&lt;String&gt; getCompileClasspathElements()
        throws DependencyResolutionRequiredException
    {
<span class="nc" id="L343">        List&lt;String&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() + 1 );</span>

<span class="nc" id="L345">        String d = getBuild().getOutputDirectory();</span>
<span class="nc bnc" id="L346" title="All 2 branches missed.">        if ( d != null )</span>
        {
<span class="nc" id="L348">            list.add( d );</span>
        }

<span class="nc bnc" id="L351" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="nc bnc" id="L353" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
                // TODO let the scope handler deal with this
<span class="nc bnc" id="L356" title="All 6 branches missed.">                if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_PROVIDED.equals( a.getScope() )</span>
                    || Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )
                {
<span class="nc" id="L359">                    addArtifactPath( a, list );</span>
                }
            }
<span class="nc" id="L362">        }</span>

<span class="nc" id="L364">        return list;</span>
    }

    // TODO this checking for file == null happens because the resolver has been confused about the root
    // artifact or not. things like the stupid dummy artifact coming from surefire.
    public List&lt;String&gt; getTestClasspathElements()
        throws DependencyResolutionRequiredException
    {
<span class="nc" id="L372">        List&lt;String&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() + 2 );</span>

<span class="nc" id="L374">        String d = getBuild().getTestOutputDirectory();</span>
<span class="nc bnc" id="L375" title="All 2 branches missed.">        if ( d != null )</span>
        {
<span class="nc" id="L377">            list.add( d );</span>
        }

<span class="nc" id="L380">        d = getBuild().getOutputDirectory();</span>
<span class="nc bnc" id="L381" title="All 2 branches missed.">        if ( d != null )</span>
        {
<span class="nc" id="L383">            list.add( d );</span>
        }

<span class="nc bnc" id="L386" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="nc bnc" id="L388" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
<span class="nc" id="L390">                addArtifactPath( a, list );</span>
            }
<span class="nc" id="L392">        }</span>

<span class="nc" id="L394">        return list;</span>
    }

    public List&lt;String&gt; getRuntimeClasspathElements()
        throws DependencyResolutionRequiredException
    {
<span class="nc" id="L400">        List&lt;String&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() + 1 );</span>

<span class="nc" id="L402">        String d = getBuild().getOutputDirectory();</span>
<span class="nc bnc" id="L403" title="All 2 branches missed.">        if ( d != null )</span>
        {
<span class="nc" id="L405">            list.add( d );</span>
        }

<span class="nc bnc" id="L408" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="nc bnc" id="L410" title="All 6 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath()</span>
            // TODO let the scope handler deal with this
                &amp;&amp; ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_RUNTIME.equals( a.getScope() ) ) )
            {
<span class="nc" id="L414">                addArtifactPath( a, list );</span>
            }
<span class="nc" id="L416">        }</span>
<span class="nc" id="L417">        return list;</span>
    }

    // ----------------------------------------------------------------------
    // Delegate to the model
    // ----------------------------------------------------------------------

    public void setModelVersion( String pomVersion )
    {
<span class="nc" id="L426">        getModel().setModelVersion( pomVersion );</span>
<span class="nc" id="L427">    }</span>

    public String getModelVersion()
    {
<span class="nc" id="L431">        return getModel().getModelVersion();</span>
    }

    public String getId()
    {
<span class="fc" id="L436">        return getModel().getId();</span>
    }

    public void setGroupId( String groupId )
    {
<span class="nc" id="L441">        getModel().setGroupId( groupId );</span>
<span class="nc" id="L442">    }</span>

    public String getGroupId()
    {
<span class="fc" id="L446">        String groupId = getModel().getGroupId();</span>

<span class="pc bpc" id="L448" title="1 of 4 branches missed.">        if ( ( groupId == null ) &amp;&amp; ( getModel().getParent() != null ) )</span>
        {
<span class="nc" id="L450">            groupId = getModel().getParent().getGroupId();</span>
        }

<span class="fc" id="L453">        return groupId;</span>
    }

    public void setArtifactId( String artifactId )
    {
<span class="nc" id="L458">        getModel().setArtifactId( artifactId );</span>
<span class="nc" id="L459">    }</span>

    public String getArtifactId()
    {
<span class="fc" id="L463">        return getModel().getArtifactId();</span>
    }

    public void setName( String name )
    {
<span class="nc" id="L468">        getModel().setName( name );</span>
<span class="nc" id="L469">    }</span>

    public String getName()
    {
        // TODO this should not be allowed to be null.
<span class="fc bfc" id="L474" title="All 2 branches covered.">        if ( getModel().getName() != null )</span>
        {
<span class="fc" id="L476">            return getModel().getName();</span>
        }
        else
        {
<span class="fc" id="L480">            return getArtifactId();</span>
        }
    }

    public void setVersion( String version )
    {
<span class="nc" id="L486">        getModel().setVersion( version );</span>
<span class="nc" id="L487">    }</span>

    public String getVersion()
    {
<span class="fc" id="L491">        String version = getModel().getVersion();</span>

<span class="pc bpc" id="L493" title="1 of 4 branches missed.">        if ( ( version == null ) &amp;&amp; ( getModel().getParent() != null ) )</span>
        {
<span class="nc" id="L495">            version = getModel().getParent().getVersion();</span>
        }

<span class="fc" id="L498">        return version;</span>
    }

    public String getPackaging()
    {
<span class="fc" id="L503">        return getModel().getPackaging();</span>
    }

    public void setPackaging( String packaging )
    {
<span class="nc" id="L508">        getModel().setPackaging( packaging );</span>
<span class="nc" id="L509">    }</span>

    public void setInceptionYear( String inceptionYear )
    {
<span class="nc" id="L513">        getModel().setInceptionYear( inceptionYear );</span>
<span class="nc" id="L514">    }</span>

    public String getInceptionYear()
    {
<span class="nc" id="L518">        return getModel().getInceptionYear();</span>
    }

    public void setUrl( String url )
    {
<span class="nc" id="L523">        getModel().setUrl( url );</span>
<span class="nc" id="L524">    }</span>

    public String getUrl()
    {
<span class="nc" id="L528">        return getModel().getUrl();</span>
    }

    public Prerequisites getPrerequisites()
    {
<span class="nc" id="L533">        return getModel().getPrerequisites();</span>
    }

    public void setIssueManagement( IssueManagement issueManagement )
    {
<span class="nc" id="L538">        getModel().setIssueManagement( issueManagement );</span>
<span class="nc" id="L539">    }</span>

    public CiManagement getCiManagement()
    {
<span class="nc" id="L543">        return getModel().getCiManagement();</span>
    }

    public void setCiManagement( CiManagement ciManagement )
    {
<span class="nc" id="L548">        getModel().setCiManagement( ciManagement );</span>
<span class="nc" id="L549">    }</span>

    public IssueManagement getIssueManagement()
    {
<span class="nc" id="L553">        return getModel().getIssueManagement();</span>
    }

    public void setDistributionManagement( DistributionManagement distributionManagement )
    {
<span class="nc" id="L558">        getModel().setDistributionManagement( distributionManagement );</span>
<span class="nc" id="L559">    }</span>

    public DistributionManagement getDistributionManagement()
    {
<span class="fc" id="L563">        return getModel().getDistributionManagement();</span>
    }

    public void setDescription( String description )
    {
<span class="nc" id="L568">        getModel().setDescription( description );</span>
<span class="nc" id="L569">    }</span>

    public String getDescription()
    {
<span class="fc" id="L573">        return getModel().getDescription();</span>
    }

    public void setOrganization( Organization organization )
    {
<span class="nc" id="L578">        getModel().setOrganization( organization );</span>
<span class="nc" id="L579">    }</span>

    public Organization getOrganization()
    {
<span class="nc" id="L583">        return getModel().getOrganization();</span>
    }

    public void setScm( Scm scm )
    {
<span class="nc" id="L588">        getModel().setScm( scm );</span>
<span class="nc" id="L589">    }</span>

    public Scm getScm()
    {
<span class="nc" id="L593">        return getModel().getScm();</span>
    }

    public void setMailingLists( List&lt;MailingList&gt; mailingLists )
    {
<span class="nc" id="L598">        getModel().setMailingLists( mailingLists );</span>
<span class="nc" id="L599">    }</span>

    public List&lt;MailingList&gt; getMailingLists()
    {
<span class="nc" id="L603">        return getModel().getMailingLists();</span>
    }

    public void addMailingList( MailingList mailingList )
    {
<span class="nc" id="L608">        getModel().addMailingList( mailingList );</span>
<span class="nc" id="L609">    }</span>

    public void setDevelopers( List&lt;Developer&gt; developers )
    {
<span class="nc" id="L613">        getModel().setDevelopers( developers );</span>
<span class="nc" id="L614">    }</span>

    public List&lt;Developer&gt; getDevelopers()
    {
<span class="nc" id="L618">        return getModel().getDevelopers();</span>
    }

    public void addDeveloper( Developer developer )
    {
<span class="nc" id="L623">        getModel().addDeveloper( developer );</span>
<span class="nc" id="L624">    }</span>

    public void setContributors( List&lt;Contributor&gt; contributors )
    {
<span class="nc" id="L628">        getModel().setContributors( contributors );</span>
<span class="nc" id="L629">    }</span>

    public List&lt;Contributor&gt; getContributors()
    {
<span class="nc" id="L633">        return getModel().getContributors();</span>
    }

    public void addContributor( Contributor contributor )
    {
<span class="nc" id="L638">        getModel().addContributor( contributor );</span>
<span class="nc" id="L639">    }</span>

    public void setBuild( Build build )
    {
<span class="nc" id="L643">        getModel().setBuild( build );</span>
<span class="nc" id="L644">    }</span>

    public Build getBuild()
    {
<span class="fc" id="L648">        return getModelBuild();</span>
    }

    public List&lt;Resource&gt; getResources()
    {
<span class="fc" id="L653">        return getBuild().getResources();</span>
    }

    public List&lt;Resource&gt; getTestResources()
    {
<span class="fc" id="L658">        return getBuild().getTestResources();</span>
    }

    public void addResource( Resource resource )
    {
<span class="fc" id="L663">        getBuild().addResource( resource );</span>
<span class="fc" id="L664">    }</span>

    public void addTestResource( Resource testResource )
    {
<span class="fc" id="L668">        getBuild().addTestResource( testResource );</span>
<span class="fc" id="L669">    }</span>

    public void setLicenses( List&lt;License&gt; licenses )
    {
<span class="nc" id="L673">        getModel().setLicenses( licenses );</span>
<span class="nc" id="L674">    }</span>

    public List&lt;License&gt; getLicenses()
    {
<span class="nc" id="L678">        return getModel().getLicenses();</span>
    }

    public void addLicense( License license )
    {
<span class="nc" id="L683">        getModel().addLicense( license );</span>
<span class="nc" id="L684">    }</span>

    public void setArtifacts( Set&lt;Artifact&gt; artifacts )
    {
<span class="fc" id="L688">        this.artifacts = artifacts;</span>

        // flush the calculated artifactMap
<span class="fc" id="L691">        artifactMap = null;</span>
<span class="fc" id="L692">    }</span>

    /**
     * All dependencies that this project has, including transitive ones. Contents are lazily populated, so depending on
     * what phases have run dependencies in some scopes won't be included. eg. if only compile phase has run,
     * dependencies with scope test won't be included.
     *
     * @return {@link Set} &amp;lt; {@link Artifact} &amp;gt;
     * @see #getDependencyArtifacts() to get only direct dependencies
     */
    public Set&lt;Artifact&gt; getArtifacts()
    {
<span class="fc bfc" id="L704" title="All 2 branches covered.">        if ( artifacts == null )</span>
        {
<span class="pc bpc" id="L706" title="3 of 4 branches missed.">            if ( artifactFilter == null || resolvedArtifacts == null )</span>
            {
<span class="fc" id="L708">                artifacts = new LinkedHashSet&lt;&gt;();</span>
            }
            else
            {
<span class="nc" id="L712">                artifacts = new LinkedHashSet&lt;&gt;( resolvedArtifacts.size() * 2 );</span>
<span class="nc bnc" id="L713" title="All 2 branches missed.">                for ( Artifact artifact : resolvedArtifacts )</span>
                {
<span class="nc bnc" id="L715" title="All 2 branches missed.">                    if ( artifactFilter.include( artifact ) )</span>
                    {
<span class="nc" id="L717">                        artifacts.add( artifact );</span>
                    }
<span class="nc" id="L719">                }</span>
            }
        }
<span class="fc" id="L722">        return artifacts;</span>
    }

    public Map&lt;String, Artifact&gt; getArtifactMap()
    {
<span class="nc bnc" id="L727" title="All 2 branches missed.">        if ( artifactMap == null )</span>
        {
<span class="nc" id="L729">            artifactMap = ArtifactUtils.artifactMapByVersionlessId( getArtifacts() );</span>
        }
<span class="nc" id="L731">        return artifactMap;</span>
    }

    public void setPluginArtifacts( Set&lt;Artifact&gt; pluginArtifacts )
    {
<span class="fc" id="L736">        this.pluginArtifacts = pluginArtifacts;</span>

<span class="fc" id="L738">        this.pluginArtifactMap = null;</span>
<span class="fc" id="L739">    }</span>

    public Set&lt;Artifact&gt; getPluginArtifacts()
    {
<span class="nc" id="L743">        return pluginArtifacts;</span>
    }

    public Map&lt;String, Artifact&gt; getPluginArtifactMap()
    {
<span class="nc bnc" id="L748" title="All 2 branches missed.">        if ( pluginArtifactMap == null )</span>
        {
<span class="nc" id="L750">            pluginArtifactMap = ArtifactUtils.artifactMapByVersionlessId( getPluginArtifacts() );</span>
        }

<span class="nc" id="L753">        return pluginArtifactMap;</span>
    }

    public void setParentArtifact( Artifact parentArtifact )
    {
<span class="fc" id="L758">        this.parentArtifact = parentArtifact;</span>
<span class="fc" id="L759">    }</span>

    public Artifact getParentArtifact()
    {
<span class="fc" id="L763">        return parentArtifact;</span>
    }

    public List&lt;Repository&gt; getRepositories()
    {
<span class="nc" id="L768">        return getModel().getRepositories();</span>
    }

    // ----------------------------------------------------------------------
    // Plugins
    // ----------------------------------------------------------------------

    public List&lt;Plugin&gt; getBuildPlugins()
    {
<span class="pc bpc" id="L777" title="1 of 2 branches missed.">        if ( getModel().getBuild() == null )</span>
        {
<span class="nc" id="L779">            return Collections.emptyList();</span>
        }
<span class="fc" id="L781">        return getModel().getBuild().getPlugins();</span>
    }

    public List&lt;String&gt; getModules()
    {
<span class="fc" id="L786">        return getModel().getModules();</span>
    }

    public PluginManagement getPluginManagement()
    {
<span class="fc" id="L791">        PluginManagement pluginMgmt = null;</span>

<span class="fc" id="L793">        Build build = getModel().getBuild();</span>
<span class="pc bpc" id="L794" title="1 of 2 branches missed.">        if ( build != null )</span>
        {
<span class="fc" id="L796">            pluginMgmt = build.getPluginManagement();</span>
        }

<span class="fc" id="L799">        return pluginMgmt;</span>
    }

    private Build getModelBuild()
    {
<span class="fc" id="L804">        Build build = getModel().getBuild();</span>

<span class="pc bpc" id="L806" title="1 of 2 branches missed.">        if ( build == null )</span>
        {
<span class="nc" id="L808">            build = new Build();</span>

<span class="nc" id="L810">            getModel().setBuild( build );</span>
        }

<span class="fc" id="L813">        return build;</span>
    }

    public void setRemoteArtifactRepositories( List&lt;ArtifactRepository&gt; remoteArtifactRepositories )
    {
<span class="fc" id="L818">        this.remoteArtifactRepositories = remoteArtifactRepositories;</span>
<span class="fc" id="L819">        this.remoteProjectRepositories = RepositoryUtils.toRepos( getRemoteArtifactRepositories() );</span>
<span class="fc" id="L820">    }</span>

    public List&lt;ArtifactRepository&gt; getRemoteArtifactRepositories()
    {
<span class="pc bpc" id="L824" title="1 of 2 branches missed.">        if ( remoteArtifactRepositories == null )</span>
        {
<span class="nc" id="L826">            remoteArtifactRepositories = new ArrayList&lt;&gt;();</span>
        }

<span class="fc" id="L829">        return remoteArtifactRepositories;</span>
    }

    public void setPluginArtifactRepositories( List&lt;ArtifactRepository&gt; pluginArtifactRepositories )
    {
<span class="fc" id="L834">        this.pluginArtifactRepositories = pluginArtifactRepositories;</span>
<span class="fc" id="L835">        this.remotePluginRepositories = RepositoryUtils.toRepos( getPluginArtifactRepositories() );</span>
<span class="fc" id="L836">    }</span>

    /**
     * @return a list of ArtifactRepository objects constructed from the Repository objects returned by
     *         getPluginRepositories.
     */
    public List&lt;ArtifactRepository&gt; getPluginArtifactRepositories()
    {
<span class="pc bpc" id="L844" title="1 of 2 branches missed.">        if ( pluginArtifactRepositories == null )</span>
        {
<span class="nc" id="L846">            pluginArtifactRepositories = new ArrayList&lt;&gt;();</span>
        }

<span class="fc" id="L849">        return pluginArtifactRepositories;</span>
    }

    public ArtifactRepository getDistributionManagementArtifactRepository()
    {
<span class="nc bnc" id="L854" title="All 4 branches missed.">        return getArtifact().isSnapshot() &amp;&amp; ( getSnapshotArtifactRepository() != null )</span>
                        ? getSnapshotArtifactRepository()
                        : getReleaseArtifactRepository();
    }

    public List&lt;Repository&gt; getPluginRepositories()
    {
<span class="nc" id="L861">        return getModel().getPluginRepositories();</span>
    }

    public List&lt;RemoteRepository&gt; getRemoteProjectRepositories()
    {
<span class="fc" id="L866">        return remoteProjectRepositories;</span>
    }

    public List&lt;RemoteRepository&gt; getRemotePluginRepositories()
    {
<span class="fc" id="L871">        return remotePluginRepositories;</span>
    }

    public void setActiveProfiles( List&lt;Profile&gt; activeProfiles )
    {
<span class="fc" id="L876">        this.activeProfiles = activeProfiles;</span>
<span class="fc" id="L877">    }</span>

    public List&lt;Profile&gt; getActiveProfiles()
    {
<span class="fc" id="L881">        return activeProfiles;</span>
    }

    public void setInjectedProfileIds( String source, List&lt;String&gt; injectedProfileIds )
    {
<span class="pc bpc" id="L886" title="1 of 2 branches missed.">        if ( injectedProfileIds != null )</span>
        {
<span class="fc" id="L888">            this.injectedProfileIds.put( source, new ArrayList&lt;&gt;( injectedProfileIds ) );</span>
        }
        else
        {
<span class="nc" id="L892">            this.injectedProfileIds.remove( source );</span>
        }
<span class="fc" id="L894">    }</span>

    /**
     * Gets the identifiers of all profiles that contributed to this project's effective model. This includes active
     * profiles from the project's POM and all its parent POMs as well as from external sources like the
     * {@code settings.xml}. The profile identifiers are grouped by the identifier of their source, e.g.
     * {@code &lt;groupId&gt;:&lt;artifactId&gt;:&lt;version&gt;} for a POM profile or {@code external} for profiles from the
     * {@code settings.xml}.
     *
     * @return The identifiers of all injected profiles, indexed by the source from which the profiles originated, never
     *         {@code null}.
     */
    public Map&lt;String, List&lt;String&gt;&gt; getInjectedProfileIds()
    {
<span class="fc" id="L908">        return this.injectedProfileIds;</span>
    }

    /**
     * Add or replace an artifact. This method is now deprecated. Use the @{MavenProjectHelper} to attach artifacts to a
     * project. In spite of the 'throws' declaration on this API, this method has never thrown an exception since Maven
     * 3.0.x. Historically, it logged and ignored a second addition of the same g/a/v/c/t. Now it replaces the file for
     * the artifact, so that plugins (e.g. shade) can change the pathname of the file for a particular set of
     * coordinates.
     *
     * @param artifact the artifact to add or replace.
     * @throws DuplicateArtifactAttachmentException
     */
    public void addAttachedArtifact( Artifact artifact )
        throws DuplicateArtifactAttachmentException
    {
<span class="nc" id="L924">        getAttachedArtifacts().add( artifact );</span>
<span class="nc" id="L925">    }</span>

    public List&lt;Artifact&gt; getAttachedArtifacts()
    {
<span class="nc bnc" id="L929" title="All 2 branches missed.">        if ( attachedArtifacts == null )</span>
        {
<span class="nc" id="L931">            attachedArtifacts = new ArrayList&lt;&gt;();</span>
        }
<span class="nc" id="L933">        return attachedArtifacts;</span>
    }

    public Xpp3Dom getGoalConfiguration( String pluginGroupId, String pluginArtifactId, String executionId,
                                         String goalId )
    {
<span class="nc" id="L939">        Xpp3Dom dom = null;</span>

<span class="nc bnc" id="L941" title="All 2 branches missed.">        if ( getBuildPlugins() != null )</span>
        {
<span class="nc bnc" id="L943" title="All 2 branches missed.">            for ( Plugin plugin : getBuildPlugins() )</span>
            {
<span class="nc bnc" id="L945" title="All 4 branches missed.">                if ( pluginGroupId.equals( plugin.getGroupId() ) &amp;&amp; pluginArtifactId.equals( plugin.getArtifactId() ) )</span>
                {
<span class="nc" id="L947">                    dom = (Xpp3Dom) plugin.getConfiguration();</span>

<span class="nc bnc" id="L949" title="All 2 branches missed.">                    if ( executionId != null )</span>
                    {
<span class="nc" id="L951">                        PluginExecution execution = plugin.getExecutionsAsMap().get( executionId );</span>
<span class="nc bnc" id="L952" title="All 2 branches missed.">                        if ( execution != null )</span>
                        {
                            // NOTE: The PluginConfigurationExpander already merged the plugin-level config in
<span class="nc" id="L955">                            dom = (Xpp3Dom) execution.getConfiguration();</span>
                        }
<span class="nc" id="L957">                    }</span>
                    break;
                }
<span class="nc" id="L960">            }</span>
        }

<span class="nc bnc" id="L963" title="All 2 branches missed.">        if ( dom != null )</span>
        {
            // make a copy so the original in the POM doesn't get messed with
<span class="nc" id="L966">            dom = new Xpp3Dom( dom );</span>
        }

<span class="nc" id="L969">        return dom;</span>
    }

    public MavenProject getExecutionProject()
    {
<span class="nc bnc" id="L974" title="All 2 branches missed.">        return ( executionProject == null ? this : executionProject );</span>
    }

    public void setExecutionProject( MavenProject executionProject )
    {
<span class="nc" id="L979">        this.executionProject = executionProject;</span>
<span class="nc" id="L980">    }</span>

    public List&lt;MavenProject&gt; getCollectedProjects()
    {
<span class="nc" id="L984">        return collectedProjects;</span>
    }

    public void setCollectedProjects( List&lt;MavenProject&gt; collectedProjects )
    {
<span class="nc" id="L989">        this.collectedProjects = collectedProjects;</span>
<span class="nc" id="L990">    }</span>

    /**
     * Direct dependencies that this project has.
     *
     * @return {@link Set} &amp;lt; {@link Artifact} &amp;gt;
     * @see #getArtifacts() to get all transitive dependencies
     */
    @Deprecated
    public Set&lt;Artifact&gt; getDependencyArtifacts()
    {
<span class="fc" id="L1001">        return dependencyArtifacts;</span>
    }

    @Deprecated
    public void setDependencyArtifacts( Set&lt;Artifact&gt; dependencyArtifacts )
    {
<span class="fc" id="L1007">        this.dependencyArtifacts = dependencyArtifacts;</span>
<span class="fc" id="L1008">    }</span>

    public void setReleaseArtifactRepository( ArtifactRepository releaseArtifactRepository )
    {
<span class="fc" id="L1012">        this.releaseArtifactRepository = releaseArtifactRepository;</span>
<span class="fc" id="L1013">    }</span>

    public void setSnapshotArtifactRepository( ArtifactRepository snapshotArtifactRepository )
    {
<span class="fc" id="L1017">        this.snapshotArtifactRepository = snapshotArtifactRepository;</span>
<span class="fc" id="L1018">    }</span>

    public void setOriginalModel( Model originalModel )
    {
<span class="fc" id="L1022">        this.originalModel = originalModel;</span>
<span class="fc" id="L1023">    }</span>

    public Model getOriginalModel()
    {
<span class="fc" id="L1027">        return originalModel;</span>
    }

    public void setManagedVersionMap( Map&lt;String, Artifact&gt; map )
    {
<span class="fc" id="L1032">        managedVersionMap = map;</span>
<span class="fc" id="L1033">    }</span>

    public Map&lt;String, Artifact&gt; getManagedVersionMap()
    {
<span class="nc" id="L1037">        return managedVersionMap;</span>
    }

    @Override
    public boolean equals( Object other )
    {
<span class="fc bfc" id="L1043" title="All 2 branches covered.">        if ( other == this )</span>
        {
<span class="fc" id="L1045">            return true;</span>
        }
<span class="pc bpc" id="L1047" title="1 of 2 branches missed.">        else if ( !( other instanceof MavenProject ) )</span>
        {
<span class="nc" id="L1049">            return false;</span>
        }

<span class="fc" id="L1052">        MavenProject that = (MavenProject) other;</span>

<span class="pc bpc" id="L1054" title="3 of 6 branches missed.">        return eq( getArtifactId(), that.getArtifactId() ) &amp;&amp; eq( getGroupId(), that.getGroupId() )</span>
            &amp;&amp; eq( getVersion(), that.getVersion() );
    }

    private static &lt;T&gt; boolean eq( T s1, T s2 )
    {
<span class="pc bpc" id="L1060" title="3 of 4 branches missed.">        return ( s1 != null ) ? s1.equals( s2 ) : s2 == null;</span>
    }

    @Override
    public int hashCode()
    {
<span class="fc" id="L1066">        int hash = 17;</span>
<span class="fc" id="L1067">        hash = 31 * hash + getGroupId().hashCode();</span>
<span class="fc" id="L1068">        hash = 31 * hash + getArtifactId().hashCode();</span>
<span class="fc" id="L1069">        hash = 31 * hash + getVersion().hashCode();</span>
<span class="fc" id="L1070">        return hash;</span>
    }

    public List&lt;Extension&gt; getBuildExtensions()
    {
<span class="fc" id="L1075">        Build build = getBuild();</span>
<span class="pc bpc" id="L1076" title="2 of 4 branches missed.">        if ( ( build == null ) || ( build.getExtensions() == null ) )</span>
        {
<span class="nc" id="L1078">            return Collections.emptyList();</span>
        }
        else
        {
<span class="fc" id="L1082">            return build.getExtensions();</span>
        }
    }

    public void addProjectReference( MavenProject project )
    {
<span class="fc" id="L1088">        projectReferences.put( getProjectReferenceId( project.getGroupId(), project.getArtifactId(),</span>
                                                      project.getVersion() ), project );
<span class="fc" id="L1090">    }</span>

    public Properties getProperties()
    {
<span class="fc" id="L1094">        return getModel().getProperties();</span>
    }

    public List&lt;String&gt; getFilters()
    {
<span class="nc" id="L1099">        return getBuild().getFilters();</span>
    }

    public Map&lt;String, MavenProject&gt; getProjectReferences()
    {
<span class="nc" id="L1104">        return projectReferences;</span>
    }

    public boolean isExecutionRoot()
    {
<span class="fc" id="L1109">        return executionRoot;</span>
    }

    public void setExecutionRoot( boolean executionRoot )
    {
<span class="nc" id="L1114">        this.executionRoot = executionRoot;</span>
<span class="nc" id="L1115">    }</span>

    public String getDefaultGoal()
    {
<span class="nc bnc" id="L1119" title="All 2 branches missed.">        return getBuild() != null ? getBuild().getDefaultGoal() : null;</span>
    }

    public Plugin getPlugin( String pluginKey )
    {
<span class="fc" id="L1124">        return getBuild().getPluginsAsMap().get( pluginKey );</span>
    }

    /**
     * Default toString
     */
    @Override
    public String toString()
    {
<span class="fc" id="L1133">        StringBuilder sb = new StringBuilder( 128 );</span>
<span class="fc" id="L1134">        sb.append( &quot;MavenProject: &quot; );</span>
<span class="fc" id="L1135">        sb.append( getGroupId() );</span>
<span class="fc" id="L1136">        sb.append( ':' );</span>
<span class="fc" id="L1137">        sb.append( getArtifactId() );</span>
<span class="fc" id="L1138">        sb.append( ':' );</span>
<span class="fc" id="L1139">        sb.append( getVersion() );</span>
<span class="fc" id="L1140">        sb.append( &quot; @ &quot; );</span>

        try
        {
<span class="fc" id="L1144">            sb.append( getFile().getPath() );</span>
        }
<span class="nc" id="L1146">        catch ( NullPointerException e )</span>
        {
            // don't log it.
<span class="fc" id="L1149">        }</span>

<span class="fc" id="L1151">        return sb.toString();</span>
    }

    /**
     * @since 2.0.9
     */
    @Override
    public MavenProject clone()
    {
        MavenProject clone;
        try
        {
<span class="nc" id="L1163">            clone = (MavenProject) super.clone();</span>
        }
<span class="nc" id="L1165">        catch ( CloneNotSupportedException e )</span>
        {
<span class="nc" id="L1167">            throw new UnsupportedOperationException( e );</span>
<span class="nc" id="L1168">        }</span>

<span class="nc" id="L1170">        clone.deepCopy( this );</span>

<span class="nc" id="L1172">        return clone;</span>
    }

    public void setModel( Model model )
    {
<span class="fc" id="L1177">        this.model = model;</span>
<span class="fc" id="L1178">    }</span>

    protected void setAttachedArtifacts( List&lt;Artifact&gt; attachedArtifacts )
    {
<span class="nc" id="L1182">        this.attachedArtifacts = attachedArtifacts;</span>
<span class="nc" id="L1183">    }</span>

    protected void setCompileSourceRoots( List&lt;String&gt; compileSourceRoots )
    {
<span class="nc" id="L1187">        this.compileSourceRoots = compileSourceRoots;</span>
<span class="nc" id="L1188">    }</span>

    protected void setTestCompileSourceRoots( List&lt;String&gt; testCompileSourceRoots )
    {
<span class="nc" id="L1192">        this.testCompileSourceRoots = testCompileSourceRoots;</span>
<span class="nc" id="L1193">    }</span>

    protected ArtifactRepository getReleaseArtifactRepository()
    {
<span class="nc" id="L1197">        return releaseArtifactRepository;</span>
    }

    protected ArtifactRepository getSnapshotArtifactRepository()
    {
<span class="nc" id="L1202">        return snapshotArtifactRepository;</span>
    }

    private void deepCopy( MavenProject project )
    {
        // disown the parent

        // copy fields
<span class="nc" id="L1210">        setFile( project.getFile() );</span>

        // don't need a deep copy, they don't get modified or added/removed to/from - but make them unmodifiable to be
        // sure!
<span class="nc bnc" id="L1214" title="All 2 branches missed.">        if ( project.getDependencyArtifacts() != null )</span>
        {
<span class="nc" id="L1216">            setDependencyArtifacts( Collections.unmodifiableSet( project.getDependencyArtifacts() ) );</span>
        }

<span class="nc bnc" id="L1219" title="All 2 branches missed.">        if ( project.getArtifacts() != null )</span>
        {
<span class="nc" id="L1221">            setArtifacts( Collections.unmodifiableSet( project.getArtifacts() ) );</span>
        }

<span class="nc bnc" id="L1224" title="All 2 branches missed.">        if ( project.getParentFile() != null )</span>
        {
<span class="nc" id="L1226">            parentFile = new File( project.getParentFile().getAbsolutePath() );</span>
        }

<span class="nc bnc" id="L1229" title="All 2 branches missed.">        if ( project.getPluginArtifacts() != null )</span>
        {
<span class="nc" id="L1231">            setPluginArtifacts( Collections.unmodifiableSet( project.getPluginArtifacts() ) );</span>
        }

<span class="nc bnc" id="L1234" title="All 2 branches missed.">        if ( project.getReportArtifacts() != null )</span>
        {
<span class="nc" id="L1236">            setReportArtifacts( Collections.unmodifiableSet( project.getReportArtifacts() ) );</span>
        }

<span class="nc bnc" id="L1239" title="All 2 branches missed.">        if ( project.getExtensionArtifacts() != null )</span>
        {
<span class="nc" id="L1241">            setExtensionArtifacts( Collections.unmodifiableSet( project.getExtensionArtifacts() ) );</span>
        }

<span class="nc" id="L1244">        setParentArtifact( ( project.getParentArtifact() ) );</span>

<span class="nc bnc" id="L1246" title="All 2 branches missed.">        if ( project.getRemoteArtifactRepositories() != null )</span>
        {
<span class="nc" id="L1248">            setRemoteArtifactRepositories( Collections.unmodifiableList( project.getRemoteArtifactRepositories() ) );</span>
        }

<span class="nc bnc" id="L1251" title="All 2 branches missed.">        if ( project.getPluginArtifactRepositories() != null )</span>
        {
<span class="nc" id="L1253">            setPluginArtifactRepositories( Collections.unmodifiableList( project.getPluginArtifactRepositories() ) );</span>
        }

<span class="nc bnc" id="L1256" title="All 2 branches missed.">        if ( project.getActiveProfiles() != null )</span>
        {
<span class="nc" id="L1258">            setActiveProfiles( ( Collections.unmodifiableList( project.getActiveProfiles() ) ) );</span>
        }

<span class="nc bnc" id="L1261" title="All 2 branches missed.">        if ( project.getAttachedArtifacts() != null )</span>
        {
            // clone properties modifyable by plugins in a forked lifecycle
<span class="nc" id="L1264">            setAttachedArtifacts( new ArrayList&lt;&gt;( project.getAttachedArtifacts() ) );</span>
        }

<span class="nc bnc" id="L1267" title="All 2 branches missed.">        if ( project.getCompileSourceRoots() != null )</span>
        {
            // clone source roots
<span class="nc" id="L1270">            setCompileSourceRoots( ( new ArrayList&lt;&gt;( project.getCompileSourceRoots() ) ) );</span>
        }

<span class="nc bnc" id="L1273" title="All 2 branches missed.">        if ( project.getTestCompileSourceRoots() != null )</span>
        {
<span class="nc" id="L1275">            setTestCompileSourceRoots( ( new ArrayList&lt;&gt;( project.getTestCompileSourceRoots() ) ) );</span>
        }

<span class="nc bnc" id="L1278" title="All 2 branches missed.">        if ( project.getScriptSourceRoots() != null )</span>
        {
<span class="nc" id="L1280">            setScriptSourceRoots( ( new ArrayList&lt;&gt;( project.getScriptSourceRoots() ) ) );</span>
        }

<span class="nc bnc" id="L1283" title="All 2 branches missed.">        if ( project.getModel() != null )</span>
        {
<span class="nc" id="L1285">            setModel( project.getModel().clone() );</span>
        }

<span class="nc bnc" id="L1288" title="All 2 branches missed.">        if ( project.getOriginalModel() != null )</span>
        {
<span class="nc" id="L1290">            setOriginalModel( project.getOriginalModel() );</span>
        }

<span class="nc" id="L1293">        setExecutionRoot( project.isExecutionRoot() );</span>

<span class="nc bnc" id="L1295" title="All 2 branches missed.">        if ( project.getArtifact() != null )</span>
        {
<span class="nc" id="L1297">            setArtifact( ArtifactUtils.copyArtifact( project.getArtifact() ) );</span>
        }

<span class="nc bnc" id="L1300" title="All 2 branches missed.">        if ( project.getManagedVersionMap() != null )</span>
        {
<span class="nc" id="L1302">            setManagedVersionMap( new HashMap&lt;&gt;( project.getManagedVersionMap() ) );</span>
        }

<span class="nc" id="L1305">        lifecyclePhases.addAll( project.lifecyclePhases );</span>
<span class="nc" id="L1306">    }</span>

    private void addArtifactPath( Artifact artifact, List&lt;String&gt; classpath )
    {
<span class="nc" id="L1310">        File file = artifact.getFile();</span>
<span class="nc bnc" id="L1311" title="All 2 branches missed.">        if ( file != null )</span>
        {
<span class="nc" id="L1313">            classpath.add( file.getPath() );</span>
        }
<span class="nc" id="L1315">    }</span>

    private static String getProjectReferenceId( String groupId, String artifactId, String version )
    {
<span class="fc" id="L1319">        StringBuilder buffer = new StringBuilder( 128 );</span>
<span class="fc" id="L1320">        buffer.append( groupId ).append( ':' ).append( artifactId ).append( ':' ).append( version );</span>
<span class="fc" id="L1321">        return buffer.toString();</span>
    }

    /**
     * Sets the value of the context value of this project identified by the given key. If the supplied value is
     * &lt;code&gt;null&lt;/code&gt;, the context value is removed from this project. Context values are intended to allow core
     * extensions to associate derived state with project instances.
     */
    public void setContextValue( String key, Object value )
    {
<span class="fc bfc" id="L1331" title="All 2 branches covered.">        if ( context == null )</span>
        {
<span class="fc" id="L1333">            context = new HashMap&lt;&gt;();</span>
        }
<span class="fc bfc" id="L1335" title="All 2 branches covered.">        if ( value != null )</span>
        {
<span class="fc" id="L1337">            context.put( key, value );</span>
        }
        else
        {
<span class="fc" id="L1341">            context.remove( key );</span>
        }
<span class="fc" id="L1343">    }</span>

    /**
     * Returns context value of this project associated with the given key or null if this project has no such value.
     */
    public Object getContextValue( String key )
    {
<span class="fc bfc" id="L1350" title="All 2 branches covered.">        if ( context == null )</span>
        {
<span class="fc" id="L1352">            return null;</span>
        }
<span class="fc" id="L1354">        return context.get( key );</span>
    }

    /**
     * Sets the project's class realm. &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public
     * for technical reasons, it is not part of the public API. In particular, this method can be changed or deleted
     * without prior notice and must not be used by plugins.
     *
     * @param classRealm The class realm hosting the build extensions of this project, may be {@code null}.
     */
    public void setClassRealm( ClassRealm classRealm )
    {
<span class="fc" id="L1366">        this.classRealm = classRealm;</span>
<span class="fc" id="L1367">    }</span>

    /**
     * Gets the project's class realm. This class realm hosts the build extensions of the project.
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @return The project's class realm or {@code null}.
     */
    public ClassRealm getClassRealm()
    {
<span class="fc" id="L1379">        return classRealm;</span>
    }

    /**
     * Sets the artifact filter used to exclude shared extension artifacts from plugin realms. &lt;strong&gt;Warning:&lt;/strong&gt;
     * This is an internal utility method that is only public for technical reasons, it is not part of the public API.
     * In particular, this method can be changed or deleted without prior notice and must not be used by plugins.
     *
     * @param extensionDependencyFilter The dependency filter to apply to plugins, may be {@code null}.
     */
    public void setExtensionDependencyFilter( DependencyFilter extensionDependencyFilter )
    {
<span class="fc" id="L1391">        this.extensionDependencyFilter = extensionDependencyFilter;</span>
<span class="fc" id="L1392">    }</span>

    /**
     * Gets the dependency filter used to exclude shared extension artifacts from plugin realms.
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @return The dependency filter or {@code null}.
     */
    public DependencyFilter getExtensionDependencyFilter()
    {
<span class="fc" id="L1404">        return extensionDependencyFilter;</span>
    }

    /**
     * Sets the transitive dependency artifacts that have been resolved/collected for this project.
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @param artifacts The set of artifacts, may be {@code null}.
     */
    public void setResolvedArtifacts( Set&lt;Artifact&gt; artifacts )
    {
<span class="fc bfc" id="L1417" title="All 2 branches covered.">        this.resolvedArtifacts = ( artifacts != null ) ? artifacts : Collections.&lt;Artifact&gt;emptySet();</span>
<span class="fc" id="L1418">        this.artifacts = null;</span>
<span class="fc" id="L1419">        this.artifactMap = null;</span>
<span class="fc" id="L1420">    }</span>

    /**
     * Sets the scope filter to select the artifacts being exposed to the currently executed mojo.
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @param artifactFilter The artifact filter, may be {@code null} to exclude all artifacts.
     */
    public void setArtifactFilter( ArtifactFilter artifactFilter )
    {
<span class="fc" id="L1432">        this.artifactFilter = artifactFilter;</span>
<span class="fc" id="L1433">        this.artifacts = null;</span>
<span class="fc" id="L1434">        this.artifactMap = null;</span>
<span class="fc" id="L1435">    }</span>

    /**
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @param phase The phase to check for, must not be {@code null}.
     * @return {@code true} if the phase has been seen.
     */
    public boolean hasLifecyclePhase( String phase )
    {
<span class="nc" id="L1447">        return lifecyclePhases.contains( phase );</span>
    }

    /**
     * &lt;strong&gt;Warning:&lt;/strong&gt; This is an internal utility method that is only public for technical reasons, it is not
     * part of the public API. In particular, this method can be changed or deleted without prior notice and must not be
     * used by plugins.
     *
     * @param lifecyclePhase The lifecycle phase to add, must not be {@code null}.
     */
    public void addLifecyclePhase( String lifecyclePhase )
    {
<span class="nc" id="L1459">        lifecyclePhases.add( lifecyclePhase );</span>
<span class="nc" id="L1460">    }</span>

    // ----------------------------------------------------------------------------------------------------------------
    //
    //
    // D E P R E C A T E D
    //
    //
    // ----------------------------------------------------------------------------------------------------------------
    //
    // Everything below will be removed for Maven 4.0.0
    //
    // ----------------------------------------------------------------------------------------------------------------

    private ProjectBuildingRequest projectBuilderConfiguration;

    private Map&lt;String, String&gt; moduleAdjustments;

    @Deprecated // This appears only to be used in test code
    public String getModulePathAdjustment( MavenProject moduleProject )
        throws IOException
    {
        // FIXME: This is hacky. What if module directory doesn't match artifactid, and parent
        // is coming from the repository??
<span class="nc" id="L1484">        String module = moduleProject.getArtifactId();</span>

<span class="nc" id="L1486">        File moduleFile = moduleProject.getFile();</span>

<span class="nc bnc" id="L1488" title="All 2 branches missed.">        if ( moduleFile != null )</span>
        {
<span class="nc" id="L1490">            File moduleDir = moduleFile.getCanonicalFile().getParentFile();</span>

<span class="nc" id="L1492">            module = moduleDir.getName();</span>
        }

<span class="nc bnc" id="L1495" title="All 2 branches missed.">        if ( moduleAdjustments == null )</span>
        {
<span class="nc" id="L1497">            moduleAdjustments = new HashMap&lt;&gt;();</span>

<span class="nc" id="L1499">            List&lt;String&gt; modules = getModules();</span>
<span class="nc bnc" id="L1500" title="All 2 branches missed.">            if ( modules != null )</span>
            {
<span class="nc bnc" id="L1502" title="All 2 branches missed.">                for ( String modulePath : modules )</span>
                {
<span class="nc" id="L1504">                    String moduleName = modulePath;</span>

<span class="nc bnc" id="L1506" title="All 4 branches missed.">                    if ( moduleName.endsWith( &quot;/&quot; ) || moduleName.endsWith( &quot;\\&quot; ) )</span>
                    {
<span class="nc" id="L1508">                        moduleName = moduleName.substring( 0, moduleName.length() - 1 );</span>
                    }

<span class="nc" id="L1511">                    int lastSlash = moduleName.lastIndexOf( '/' );</span>

<span class="nc bnc" id="L1513" title="All 2 branches missed.">                    if ( lastSlash &lt; 0 )</span>
                    {
<span class="nc" id="L1515">                        lastSlash = moduleName.lastIndexOf( '\\' );</span>
                    }

<span class="nc" id="L1518">                    String adjustment = null;</span>

<span class="nc bnc" id="L1520" title="All 2 branches missed.">                    if ( lastSlash &gt; -1 )</span>
                    {
<span class="nc" id="L1522">                        moduleName = moduleName.substring( lastSlash + 1 );</span>
<span class="nc" id="L1523">                        adjustment = modulePath.substring( 0, lastSlash );</span>
                    }

<span class="nc" id="L1526">                    moduleAdjustments.put( moduleName, adjustment );</span>
<span class="nc" id="L1527">                }</span>
            }
        }

<span class="nc" id="L1531">        return moduleAdjustments.get( module );</span>
    }

    @Deprecated
    public Set&lt;Artifact&gt; createArtifacts( ArtifactFactory artifactFactory, String inheritedScope,
                                          ArtifactFilter filter )
        throws InvalidDependencyVersionException
    {
<span class="nc" id="L1539">        return MavenMetadataSource.createArtifacts( artifactFactory, getDependencies(), inheritedScope, filter, this );</span>
    }

    @Deprecated
    protected void setScriptSourceRoots( List&lt;String&gt; scriptSourceRoots )
    {
<span class="nc" id="L1545">        this.scriptSourceRoots = scriptSourceRoots;</span>
<span class="nc" id="L1546">    }</span>

    @Deprecated
    public void addScriptSourceRoot( String path )
    {
<span class="pc bpc" id="L1551" title="1 of 2 branches missed.">        if ( path != null )</span>
        {
<span class="fc" id="L1553">            path = path.trim();</span>
<span class="pc bpc" id="L1554" title="1 of 2 branches missed.">            if ( path.length() != 0 )</span>
            {
<span class="pc bpc" id="L1556" title="1 of 2 branches missed.">                if ( !getScriptSourceRoots().contains( path ) )</span>
                {
<span class="fc" id="L1558">                    getScriptSourceRoots().add( path );</span>
                }
            }
        }
<span class="fc" id="L1562">    }</span>

    @Deprecated
    public List&lt;String&gt; getScriptSourceRoots()
    {
<span class="fc" id="L1567">        return scriptSourceRoots;</span>
    }

    @Deprecated
    public List&lt;Artifact&gt; getCompileArtifacts()
    {
<span class="nc" id="L1573">        List&lt;Artifact&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="nc bnc" id="L1575" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO classpath check doesn't belong here - that's the other method
<span class="nc bnc" id="L1578" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
                // TODO let the scope handler deal with this
<span class="nc bnc" id="L1581" title="All 6 branches missed.">                if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_PROVIDED.equals( a.getScope() )</span>
                    || Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )
                {
<span class="nc" id="L1584">                    list.add( a );</span>
                }
            }
<span class="nc" id="L1587">        }</span>
<span class="nc" id="L1588">        return list;</span>
    }

    @Deprecated
    public List&lt;Dependency&gt; getCompileDependencies()
    {
<span class="nc" id="L1594">        Set&lt;Artifact&gt; artifacts = getArtifacts();</span>

<span class="nc bnc" id="L1596" title="All 4 branches missed.">        if ( ( artifacts == null ) || artifacts.isEmpty() )</span>
        {
<span class="nc" id="L1598">            return Collections.emptyList();</span>
        }

<span class="nc" id="L1601">        List&lt;Dependency&gt; list = new ArrayList&lt;&gt;( artifacts.size() );</span>

<span class="nc bnc" id="L1603" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO let the scope handler deal with this
<span class="nc bnc" id="L1606" title="All 6 branches missed.">            if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_PROVIDED.equals( a.getScope() )</span>
                || Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )
            {
<span class="nc" id="L1609">                Dependency dependency = new Dependency();</span>

<span class="nc" id="L1611">                dependency.setArtifactId( a.getArtifactId() );</span>
<span class="nc" id="L1612">                dependency.setGroupId( a.getGroupId() );</span>
<span class="nc" id="L1613">                dependency.setVersion( a.getVersion() );</span>
<span class="nc" id="L1614">                dependency.setScope( a.getScope() );</span>
<span class="nc" id="L1615">                dependency.setType( a.getType() );</span>
<span class="nc" id="L1616">                dependency.setClassifier( a.getClassifier() );</span>

<span class="nc" id="L1618">                list.add( dependency );</span>
            }
<span class="nc" id="L1620">        }</span>
<span class="nc" id="L1621">        return list;</span>
    }

    @Deprecated
    public List&lt;Artifact&gt; getTestArtifacts()
    {
<span class="nc" id="L1627">        List&lt;Artifact&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="nc bnc" id="L1629" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO classpath check doesn't belong here - that's the other method
<span class="nc bnc" id="L1632" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
<span class="nc" id="L1634">                list.add( a );</span>
            }
<span class="nc" id="L1636">        }</span>
<span class="nc" id="L1637">        return list;</span>
    }

    @Deprecated
    public List&lt;Dependency&gt; getTestDependencies()
    {
<span class="nc" id="L1643">        Set&lt;Artifact&gt; artifacts = getArtifacts();</span>

<span class="nc bnc" id="L1645" title="All 4 branches missed.">        if ( ( artifacts == null ) || artifacts.isEmpty() )</span>
        {
<span class="nc" id="L1647">            return Collections.emptyList();</span>
        }

<span class="nc" id="L1650">        List&lt;Dependency&gt; list = new ArrayList&lt;&gt;( artifacts.size() );</span>

<span class="nc bnc" id="L1652" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="nc" id="L1654">            Dependency dependency = new Dependency();</span>

<span class="nc" id="L1656">            dependency.setArtifactId( a.getArtifactId() );</span>
<span class="nc" id="L1657">            dependency.setGroupId( a.getGroupId() );</span>
<span class="nc" id="L1658">            dependency.setVersion( a.getVersion() );</span>
<span class="nc" id="L1659">            dependency.setScope( a.getScope() );</span>
<span class="nc" id="L1660">            dependency.setType( a.getType() );</span>
<span class="nc" id="L1661">            dependency.setClassifier( a.getClassifier() );</span>

<span class="nc" id="L1663">            list.add( dependency );</span>
<span class="nc" id="L1664">        }</span>
<span class="nc" id="L1665">        return list;</span>
    }

    @Deprecated // used by the Maven ITs
    public List&lt;Dependency&gt; getRuntimeDependencies()
    {
<span class="nc" id="L1671">        Set&lt;Artifact&gt; artifacts = getArtifacts();</span>

<span class="nc bnc" id="L1673" title="All 4 branches missed.">        if ( ( artifacts == null ) || artifacts.isEmpty() )</span>
        {
<span class="nc" id="L1675">            return Collections.emptyList();</span>
        }

<span class="nc" id="L1678">        List&lt;Dependency&gt; list = new ArrayList&lt;&gt;( artifacts.size() );</span>

<span class="nc bnc" id="L1680" title="All 2 branches missed.">        for ( Artifact a : getArtifacts()  )</span>
        {
            // TODO let the scope handler deal with this
<span class="nc bnc" id="L1683" title="All 4 branches missed.">            if ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_RUNTIME.equals( a.getScope() ) )</span>
            {
<span class="nc" id="L1685">                Dependency dependency = new Dependency();</span>

<span class="nc" id="L1687">                dependency.setArtifactId( a.getArtifactId() );</span>
<span class="nc" id="L1688">                dependency.setGroupId( a.getGroupId() );</span>
<span class="nc" id="L1689">                dependency.setVersion( a.getVersion() );</span>
<span class="nc" id="L1690">                dependency.setScope( a.getScope() );</span>
<span class="nc" id="L1691">                dependency.setType( a.getType() );</span>
<span class="nc" id="L1692">                dependency.setClassifier( a.getClassifier() );</span>

<span class="nc" id="L1694">                list.add( dependency );</span>
            }
<span class="nc" id="L1696">        }</span>
<span class="nc" id="L1697">        return list;</span>
    }

    @Deprecated
    public List&lt;Artifact&gt; getRuntimeArtifacts()
    {
<span class="nc" id="L1703">        List&lt;Artifact&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="nc bnc" id="L1705" title="All 2 branches missed.">        for ( Artifact a : getArtifacts()  )</span>
        {
            // TODO classpath check doesn't belong here - that's the other method
<span class="nc bnc" id="L1708" title="All 6 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath()</span>
            // TODO let the scope handler deal with this
                &amp;&amp; ( Artifact.SCOPE_COMPILE.equals( a.getScope() ) || Artifact.SCOPE_RUNTIME.equals( a.getScope() ) ) )
            {
<span class="nc" id="L1712">                list.add( a );</span>
            }
<span class="nc" id="L1714">        }</span>
<span class="nc" id="L1715">        return list;</span>
    }

    @Deprecated
    public List&lt;String&gt; getSystemClasspathElements()
        throws DependencyResolutionRequiredException
    {
<span class="nc" id="L1722">        List&lt;String&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="nc" id="L1724">        String d = getBuild().getOutputDirectory();</span>
<span class="nc bnc" id="L1725" title="All 2 branches missed.">        if ( d != null )</span>
        {
<span class="nc" id="L1727">            list.add( d );</span>
        }

<span class="nc bnc" id="L1730" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
<span class="nc bnc" id="L1732" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
                // TODO let the scope handler deal with this
<span class="nc bnc" id="L1735" title="All 2 branches missed.">                if ( Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )</span>
                {
<span class="nc" id="L1737">                    addArtifactPath( a, list );</span>
                }
            }
<span class="nc" id="L1740">        }</span>
<span class="nc" id="L1741">        return list;</span>
    }

    @Deprecated
    public List&lt;Artifact&gt; getSystemArtifacts()
    {
<span class="nc" id="L1747">        List&lt;Artifact&gt; list = new ArrayList&lt;&gt;( getArtifacts().size() );</span>

<span class="nc bnc" id="L1749" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO classpath check doesn't belong here - that's the other method
<span class="nc bnc" id="L1752" title="All 2 branches missed.">            if ( a.getArtifactHandler().isAddedToClasspath() )</span>
            {
                // TODO let the scope handler deal with this
<span class="nc bnc" id="L1755" title="All 2 branches missed.">                if ( Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )</span>
                {
<span class="nc" id="L1757">                    list.add( a );</span>
                }
            }
<span class="nc" id="L1760">        }</span>
<span class="nc" id="L1761">        return list;</span>
    }

    @Deprecated
    public List&lt;Dependency&gt; getSystemDependencies()
    {
<span class="nc" id="L1767">        Set&lt;Artifact&gt; artifacts = getArtifacts();</span>

<span class="nc bnc" id="L1769" title="All 4 branches missed.">        if ( ( artifacts == null ) || artifacts.isEmpty() )</span>
        {
<span class="nc" id="L1771">            return Collections.emptyList();</span>
        }

<span class="nc" id="L1774">        List&lt;Dependency&gt; list = new ArrayList&lt;&gt;( artifacts.size() );</span>

<span class="nc bnc" id="L1776" title="All 2 branches missed.">        for ( Artifact a : getArtifacts() )</span>
        {
            // TODO let the scope handler deal with this
<span class="nc bnc" id="L1779" title="All 2 branches missed.">            if ( Artifact.SCOPE_SYSTEM.equals( a.getScope() ) )</span>
            {
<span class="nc" id="L1781">                Dependency dependency = new Dependency();</span>

<span class="nc" id="L1783">                dependency.setArtifactId( a.getArtifactId() );</span>
<span class="nc" id="L1784">                dependency.setGroupId( a.getGroupId() );</span>
<span class="nc" id="L1785">                dependency.setVersion( a.getVersion() );</span>
<span class="nc" id="L1786">                dependency.setScope( a.getScope() );</span>
<span class="nc" id="L1787">                dependency.setType( a.getType() );</span>
<span class="nc" id="L1788">                dependency.setClassifier( a.getClassifier() );</span>

<span class="nc" id="L1790">                list.add( dependency );</span>
            }
<span class="nc" id="L1792">        }</span>
<span class="nc" id="L1793">        return list;</span>
    }

    @Deprecated
    public void setReporting( Reporting reporting )
    {
<span class="nc" id="L1799">        getModel().setReporting( reporting );</span>
<span class="nc" id="L1800">    }</span>

    @Deprecated
    public Reporting getReporting()
    {
<span class="nc" id="L1805">        return getModel().getReporting();</span>
    }

    @Deprecated
    public void setReportArtifacts( Set&lt;Artifact&gt; reportArtifacts )
    {
<span class="fc" id="L1811">        this.reportArtifacts = reportArtifacts;</span>

<span class="fc" id="L1813">        reportArtifactMap = null;</span>
<span class="fc" id="L1814">    }</span>

    @Deprecated
    public Set&lt;Artifact&gt; getReportArtifacts()
    {
<span class="nc" id="L1819">        return reportArtifacts;</span>
    }

    @Deprecated
    public Map&lt;String, Artifact&gt; getReportArtifactMap()
    {
<span class="nc bnc" id="L1825" title="All 2 branches missed.">        if ( reportArtifactMap == null )</span>
        {
<span class="nc" id="L1827">            reportArtifactMap = ArtifactUtils.artifactMapByVersionlessId( getReportArtifacts() );</span>
        }

<span class="nc" id="L1830">        return reportArtifactMap;</span>
    }

    @Deprecated
    public void setExtensionArtifacts( Set&lt;Artifact&gt; extensionArtifacts )
    {
<span class="fc" id="L1836">        this.extensionArtifacts = extensionArtifacts;</span>

<span class="fc" id="L1838">        extensionArtifactMap = null;</span>
<span class="fc" id="L1839">    }</span>

    @Deprecated
    public Set&lt;Artifact&gt; getExtensionArtifacts()
    {
<span class="nc" id="L1844">        return extensionArtifacts;</span>
    }

    @Deprecated
    public Map&lt;String, Artifact&gt; getExtensionArtifactMap()
    {
<span class="nc bnc" id="L1850" title="All 2 branches missed.">        if ( extensionArtifactMap == null )</span>
        {
<span class="nc" id="L1852">            extensionArtifactMap = ArtifactUtils.artifactMapByVersionlessId( getExtensionArtifacts() );</span>
        }

<span class="nc" id="L1855">        return extensionArtifactMap;</span>
    }

    @Deprecated
    public List&lt;ReportPlugin&gt; getReportPlugins()
    {
<span class="pc bpc" id="L1861" title="1 of 2 branches missed.">        if ( getModel().getReporting() == null )</span>
        {
<span class="nc" id="L1863">            return Collections.emptyList();</span>
        }
<span class="fc" id="L1865">        return getModel().getReporting().getPlugins();</span>

    }

    @Deprecated
    public Xpp3Dom getReportConfiguration( String pluginGroupId, String pluginArtifactId, String reportSetId )
    {
<span class="nc" id="L1872">        Xpp3Dom dom = null;</span>

        // ----------------------------------------------------------------------
        // I would like to be able to lookup the Mojo object using a key but
        // we have a limitation in modello that will be remedied shortly. So
        // for now I have to iterate through and see what we have.
        // ----------------------------------------------------------------------

<span class="nc bnc" id="L1880" title="All 2 branches missed.">        if ( getReportPlugins() != null )</span>
        {
<span class="nc bnc" id="L1882" title="All 2 branches missed.">            for ( ReportPlugin plugin : getReportPlugins() )</span>
            {
<span class="nc bnc" id="L1884" title="All 4 branches missed.">                if ( pluginGroupId.equals( plugin.getGroupId() ) &amp;&amp; pluginArtifactId.equals( plugin.getArtifactId() ) )</span>
                {
<span class="nc" id="L1886">                    dom = (Xpp3Dom) plugin.getConfiguration();</span>

<span class="nc bnc" id="L1888" title="All 2 branches missed.">                    if ( reportSetId != null )</span>
                    {
<span class="nc" id="L1890">                        ReportSet reportSet = plugin.getReportSetsAsMap().get( reportSetId );</span>
<span class="nc bnc" id="L1891" title="All 2 branches missed.">                        if ( reportSet != null )</span>
                        {
<span class="nc" id="L1893">                            Xpp3Dom executionConfiguration = (Xpp3Dom) reportSet.getConfiguration();</span>
<span class="nc bnc" id="L1894" title="All 2 branches missed.">                            if ( executionConfiguration != null )</span>
                            {
<span class="nc" id="L1896">                                Xpp3Dom newDom = new Xpp3Dom( executionConfiguration );</span>
<span class="nc" id="L1897">                                dom = Xpp3Dom.mergeXpp3Dom( newDom, dom );</span>
                            }
                        }
<span class="nc" id="L1900">                    }</span>
                    break;
                }
<span class="nc" id="L1903">            }</span>
        }

<span class="nc bnc" id="L1906" title="All 2 branches missed.">        if ( dom != null )</span>
        {
            // make a copy so the original in the POM doesn't get messed with
<span class="nc" id="L1909">            dom = new Xpp3Dom( dom );</span>
        }

<span class="nc" id="L1912">        return dom;</span>
    }

    /**
     * @deprecated Use MavenProjectHelper.attachArtifact(..) instead.
     */
    @Deprecated
    public void attachArtifact( String type, String classifier, File file )
    {
<span class="nc" id="L1921">    }</span>

    /**
     * @deprecated Use {@link org.apache.maven.model.io.ModelWriter}.
     */
    @Deprecated
    public void writeModel( Writer writer )
        throws IOException
    {
<span class="nc" id="L1930">        MavenXpp3Writer pomWriter = new MavenXpp3Writer();</span>
<span class="nc" id="L1931">        pomWriter.write( writer, getModel() );</span>
<span class="nc" id="L1932">    }</span>

    /**
     * @deprecated Use {@link org.apache.maven.model.io.ModelWriter}.
     */
    @Deprecated
    public void writeOriginalModel( Writer writer )
        throws IOException
    {
<span class="nc" id="L1941">        MavenXpp3Writer pomWriter = new MavenXpp3Writer();</span>
<span class="nc" id="L1942">        pomWriter.write( writer, getOriginalModel() );</span>
<span class="nc" id="L1943">    }</span>

    @Deprecated
    public Artifact replaceWithActiveArtifact( Artifact pluginArtifact )
    {
<span class="nc" id="L1948">        return pluginArtifact;</span>
    }

    /**
     * Gets the project building request from which this project instance was created. &lt;strong&gt;Warning:&lt;/strong&gt; This is
     * an utility method that is meant to assist integrators of Maven, it must not be used by Maven plugins.
     *
     * @return The project building request or {@code null}.
     * @since 2.1
     */
    @Deprecated
    public ProjectBuildingRequest getProjectBuildingRequest()
    {
<span class="fc" id="L1961">        return projectBuilderConfiguration;</span>
    }

    /**
     * Sets the project building request from which this project instance was created. &lt;strong&gt;Warning:&lt;/strong&gt; This is
     * an utility method that is meant to assist integrators of Maven, it must not be used by Maven plugins.
     *
     * @param projectBuildingRequest The project building request, may be {@code null}.
     * @since 2.1
     */
    // used by maven-dependency-tree
    @Deprecated
    public void setProjectBuildingRequest( ProjectBuildingRequest projectBuildingRequest )
    {
<span class="fc" id="L1975">        this.projectBuilderConfiguration = projectBuildingRequest;</span>
<span class="fc" id="L1976">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>